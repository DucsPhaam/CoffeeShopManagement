<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="690.0" prefWidth="1102.0" style="-fx-background-color: #f8f9fa;" stylesheets="@/resources/Stylesheet/Button.css" xmlns="http://javafx.com/javafx/18" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controller.auth.ChangePasswordController">
    <children>
        <!-- Main Container -->
        <VBox alignment="TOP_CENTER" layoutX="-7.0" spacing="20" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="-7.0" AnchorPane.rightAnchor="7.0" AnchorPane.topAnchor="0.0">
            <padding>
                <Insets top="25.0" left="40.0" right="40.0" bottom="25.0" />
            </padding>
            <children>
                <!-- Header Section -->
                <HBox alignment="CENTER_LEFT" spacing="15" VBox.vgrow="NEVER">
                    <children>
                        <StackPane prefHeight="60.0" prefWidth="60.0" style="-fx-background-color: linear-gradient(to bottom right, #667eea, #764ba2); -fx-background-radius: 15; -fx-effect: dropshadow(gaussian, rgba(102, 126, 234, 0.4), 15, 0.3, 0, 5);">
                            <children>
                                <ImageView fitHeight="35.0" fitWidth="35.0" pickOnBounds="true" preserveRatio="true">
                                    <image>
                                        <Image url="@/resources/img/pw.png" />
                                    </image>
                                </ImageView>
                            </children>
                        </StackPane>
                        <VBox spacing="3">
                            <children>
                                <Label text="Change Password" textFill="#2d3436">
                                    <font>
                                        <Font name="Segoe UI Bold" size="28.0" />
                                    </font>
                                </Label>
                                <Label text="Update your account password securely" textFill="#636e72">
                                    <font>
                                        <Font name="Segoe UI" size="13.0" />
                                    </font>
                                </Label>
                            </children>
                        </VBox>
                    </children>
                </HBox>

                <!-- Warning Label -->
                <HBox alignment="CENTER" minHeight="25" prefHeight="25.0">
                    <children>
                        <Label fx:id="warningLabel" textAlignment="CENTER" textFill="#ff6b6b" wrapText="true">
                            <font>
                                <Font name="Segoe UI Semibold" size="13.0" />
                            </font>
                        </Label>
                    </children>
                </HBox>

                <!-- Form Card -->
                <VBox spacing="18" style="-fx-background-color: white; -fx-background-radius: 20; -fx-padding: 35;" VBox.vgrow="ALWAYS">
                    <effect>
                        <DropShadow color="#00000015" radius="20" spread="0.1" offsetY="5"/>
                    </effect>
                    <VBox.margin>
                        <Insets top="10.0" />
                    </VBox.margin>
                    <children>
                        <!-- Current Password Field -->
                        <HBox fx:id="currentPasswordHBox" alignment="CENTER" spacing="15">
                            <children>
                                <VBox spacing="10" HBox.hgrow="ALWAYS" maxWidth="500" alignment="CENTER">
                                    <children>
                                        <Label text="Current Password" textFill="#2d3436">
                                            <font>
                                                <Font name="Segoe UI Semibold" size="14.0" />
                                            </font>
                                        </Label>
                                        <HBox alignment="CENTER_LEFT" spacing="12" style="-fx-background-color: #f8f9fa; -fx-background-radius: 12; -fx-border-color: #dfe6e9; -fx-border-radius: 12; -fx-border-width: 2; -fx-padding: 12;">
                                            <children>
                                                <ImageView fitHeight="20.0" fitWidth="20.0" opacity="0.6" pickOnBounds="true" preserveRatio="true">
                                                    <image>
                                                        <Image url="@/resources/img/pw.png" />
                                                    </image>
                                                </ImageView>
                                                <StackPane HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <TextField fx:id="currentPasswordTxtField" promptText="Enter your current password" style="-fx-background-color: transparent; -fx-border-width: 0; -fx-padding: 0;" visible="false" managed="false">
                                                            <font>
                                                                <Font name="Segoe UI" size="13.0" />
                                                            </font>
                                                        </TextField>
                                                        <PasswordField fx:id="currentPasswordField" promptText="Enter your current password" style="-fx-background-color: transparent; -fx-border-width: 0; -fx-padding: 0;" visible="true" managed="true">
                                                            <font>
                                                                <Font name="Segoe UI" size="13.0" />
                                                            </font>
                                                        </PasswordField>
                                                    </children>
                                                </StackPane>
                                                <ImageView fx:id="showCurrentPassword" fitHeight="18.0" fitWidth="18.0" onMousePressed="#currentPasswordSetOnMousePressed" onMouseReleased="#currentPasswordSetOnMouseReleased" opacity="0.5" pickOnBounds="true" preserveRatio="true" style="-fx-cursor: hand;">
                                                    <image>
                                                        <Image url="@/resources/img/showPw.png" />
                                                    </image>
                                                </ImageView>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                            </children>
                        </HBox>

                        <!-- Change Password Button -->
                        <HBox fx:id="ChangeBtnHBox" alignment="CENTER">
                            <VBox.margin>
                                <Insets top="5.0" />
                            </VBox.margin>
                            <children>
                                <Button fx:id="changePasswordBtn" defaultButton="true" mnemonicParsing="false" onAction="#handleChangePasswordClicked" prefHeight="45.0" prefWidth="190.0" style="-fx-background-color: linear-gradient(to right, #667eea, #764ba2); -fx-background-radius: 12; -fx-text-fill: white; -fx-cursor: hand; -fx-font-weight: bold;" text="Change Password">
                                    <font>
                                        <Font name="Segoe UI Bold" size="14.0" />
                                    </font>
                                    <effect>
                                        <DropShadow color="#667eea60" radius="15" spread="0.2" offsetY="5"/>
                                    </effect>
                                </Button>
                            </children>
                        </HBox>

                        <!-- New Password Field -->
                        <HBox fx:id="newPasswordHBox" alignment="CENTER" spacing="15">
                            <children>
                                <VBox spacing="10" HBox.hgrow="ALWAYS" maxWidth="500" alignment="CENTER">
                                    <children>
                                        <Label text="New Password" textFill="#2d3436">
                                            <font>
                                                <Font name="Segoe UI Semibold" size="14.0" />
                                            </font>
                                        </Label>
                                        <HBox alignment="CENTER_LEFT" spacing="12" style="-fx-background-color: #f8f9fa; -fx-background-radius: 12; -fx-border-color: #dfe6e9; -fx-border-radius: 12; -fx-border-width: 2; -fx-padding: 12;">
                                            <children>
                                                <ImageView fitHeight="20.0" fitWidth="20.0" opacity="0.6" pickOnBounds="true" preserveRatio="true">
                                                    <image>
                                                        <Image url="@/resources/img/pw.png" />
                                                    </image>
                                                </ImageView>
                                                <StackPane HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <TextField fx:id="newPasswordTxtField" promptText="Enter your new password" style="-fx-background-color: transparent; -fx-border-width: 0; -fx-padding: 0;" visible="false" managed="false">
                                                            <font>
                                                                <Font name="Segoe UI" size="13.0" />
                                                            </font>
                                                        </TextField>
                                                        <PasswordField fx:id="newPasswordField" promptText="Enter your new password" style="-fx-background-color: transparent; -fx-border-width: 0; -fx-padding: 0;" visible="true" managed="true">
                                                            <font>
                                                                <Font name="Segoe UI" size="13.0" />
                                                            </font>
                                                        </PasswordField>
                                                    </children>
                                                </StackPane>
                                                <ImageView fx:id="showNewPassword" fitHeight="18.0" fitWidth="18.0" onMousePressed="#newPasswordSetOnMousePressed" onMouseReleased="#newPasswordSetOnMouseReleased" opacity="0.5" pickOnBounds="true" preserveRatio="true" style="-fx-cursor: hand;">
                                                    <image>
                                                        <Image url="@/resources/img/showPw.png" />
                                                    </image>
                                                </ImageView>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                            </children>
                        </HBox>

                        <!-- Confirm Password Field -->
                        <HBox fx:id="confirmHBox" alignment="CENTER" spacing="15">
                            <children>
                                <VBox spacing="10" HBox.hgrow="ALWAYS" maxWidth="500" alignment="CENTER">
                                    <children>
                                        <Label text="Confirm New Password" textFill="#2d3436">
                                            <font>
                                                <Font name="Segoe UI Semibold" size="14.0" />
                                            </font>
                                        </Label>
                                        <HBox alignment="CENTER_LEFT" spacing="12" style="-fx-background-color: #f8f9fa; -fx-background-radius: 12; -fx-border-color: #dfe6e9; -fx-border-radius: 12; -fx-border-width: 2; -fx-padding: 12;">
                                            <children>
                                                <ImageView fitHeight="20.0" fitWidth="20.0" opacity="0.6" pickOnBounds="true" preserveRatio="true">
                                                    <image>
                                                        <Image url="@/resources/img/pw.png" />
                                                    </image>
                                                </ImageView>
                                                <StackPane HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <TextField fx:id="confirmPasswordTxtField" promptText="Confirm your new password" style="-fx-background-color: transparent; -fx-border-width: 0; -fx-padding: 0;" visible="false" managed="false">
                                                            <font>
                                                                <Font name="Segoe UI" size="13.0" />
                                                            </font>
                                                        </TextField>
                                                        <PasswordField fx:id="confirmPasswordField" promptText="Confirm your new password" style="-fx-background-color: transparent; -fx-border-width: 0; -fx-padding: 0;" visible="true" managed="true">
                                                            <font>
                                                                <Font name="Segoe UI" size="13.0" />
                                                            </font>
                                                        </PasswordField>
                                                    </children>
                                                </StackPane>
                                                <ImageView fx:id="showConfirmPassword" fitHeight="18.0" fitWidth="18.0" onMousePressed="#confirmPasswordSetOnMousePressed" onMouseReleased="#confirmPasswordSetOnMouseReleased" opacity="0.5" pickOnBounds="true" preserveRatio="true" style="-fx-cursor: hand;">
                                                    <image>
                                                        <Image url="@/resources/img/showPw.png" />
                                                    </image>
                                                </ImageView>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                            </children>
                        </HBox>

                        <!-- Confirm Button -->
                        <HBox fx:id="ConfirmBtnHBox" alignment="CENTER">
                            <VBox.margin>
                                <Insets top="5.0" />
                            </VBox.margin>
                            <children>
                                <Button fx:id="confirmPasswordBtn" defaultButton="true" mnemonicParsing="false" onAction="#handleConfirmPasswordClicked" prefHeight="45.0" prefWidth="190.0" style="-fx-background-color: linear-gradient(to right, #11998e, #38ef7d); -fx-background-radius: 12; -fx-text-fill: white; -fx-cursor: hand; -fx-font-weight: bold;" text="Confirm Change">
                                    <font>
                                        <Font name="Segoe UI Bold" size="14.0" />
                                    </font>
                                    <effect>
                                        <DropShadow color="#11998e60" radius="15" spread="0.2" offsetY="5"/>
                                    </effect>
                                </Button>
                            </children>
                        </HBox>
                    </children>
                </VBox>

                <!-- Security Tips -->
                <VBox spacing="8" style="-fx-background-color: #e3f2fd; -fx-background-radius: 12; -fx-padding: 15;">
                    <children>
                        <HBox alignment="CENTER_LEFT" spacing="8">
                            <children>
                                <ImageView fitHeight="18.0" fitWidth="18.0" pickOnBounds="true" preserveRatio="true">
                                    <image>
                                        <Image url="@/resources/img/icon.png" />
                                    </image>
                                </ImageView>
                                <Label text="Password Security Tips" textFill="#1565c0">
                                    <font>
                                        <Font name="Segoe UI Bold" size="13.0" />
                                    </font>
                                </Label>
                            </children>
                        </HBox>
                        <Label text="• Use at least 8 characters with a mix of letters, numbers, and symbols" textFill="#424242" wrapText="true">
                            <font>
                                <Font name="Segoe UI" size="11.0" />
                            </font>
                        </Label>
                        <Label text="• Avoid using common words or personal information" textFill="#424242" wrapText="true">
                            <font>
                                <Font name="Segoe UI" size="11.0" />
                            </font>
                        </Label>
                        <Label text="• Don't reuse passwords from other accounts" textFill="#424242" wrapText="true">
                            <font>
                                <Font name="Segoe UI" size="11.0" />
                            </font>
                        </Label>
                    </children>
                </VBox>
            </children>
        </VBox>
    </children>
</AnchorPane>